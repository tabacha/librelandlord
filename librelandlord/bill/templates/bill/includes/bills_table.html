{% comment %}Rechnungsübersicht Tabelle{% endcomment %}
<table class="meter-readings-table">
    <thead>
        <tr>
            <th>Rechnungsdatum</th>
            <th>Rechnungsnummer</th>
            <th>Text</th>
            <th>Zeitraum</th>
            <th>Betrag</th>
        </tr>
    </thead>
    <tbody>
        {% for bill in bills %}
        <tr>
            <td>{{ bill.bill_date|date:"d.m.Y" }}</td>
            <td class="number-cell">{{ bill.bill_number }}</td>
            <td>{{ bill.text }}{% if PAPERLESS_BASE_URL %}
                {% if bill.paperless_id %}
                <a href="{{ PAPERLESS_BASE_URL }}/documents/{{ bill.paperless_id }}/details"
                   target="_blank"
                   class="paperless-btn paperless-btn-linked no-print"
                   title="In Paperless öffnen (ID: {{ bill.paperless_id }})">
                    <svg class="paperless-icon" viewBox="43.38 0.14 425.32 512.02"><path d="M136.8 459.6c-2.3-10.8-6.9-32.5-7.4-32.5-96.5-57.7-85.1-157.6-53.1-214.7 6.9 71.9 134.2 121.6 60 209.6-.6 1.1 3.4 14.8 6.9 27.4 14.8-25.1 37.1-55.4 36-58.2-91.4-222.7 194.1-239.8 253.5-378 26.8 133.6-13.7 340.3-243.3 392.9-1.1.6-41.7 71.9-43.4 72.5 0-1.1-17.1-.6-14.8-6.3 1.1-3.6 3.3-8.1 5.6-12.7m56.6-98.8c-36-85.1 69.7-178.7 122.2-202.1C208.2 254.6 189.9 326 193.4 360.8M134 405.9c29.1-33.7-5.1-91.4-25.7-110.2 34.8 60 32.5 94.8 25.7 110.2" transform="translate(-15.306 -14.379)scale(1.10017)"/></svg>
                </a>
                {% else %}
                <button type="button"
                        class="paperless-btn paperless-btn-unlinked no-print"
                        onclick="openPaperlessDialog({{ bill.id }}, '{{ bill.text|escapejs }}', '{{ bill.bill_date|date:'d.m.Y' }}', '{{ bill.bill_number|escapejs }}')"
                        title="Mit Paperless verknüpfen">
                    <svg class="paperless-icon" viewBox="43.38 0.14 425.32 512.02"><path d="M136.8 459.6c-2.3-10.8-6.9-32.5-7.4-32.5-96.5-57.7-85.1-157.6-53.1-214.7 6.9 71.9 134.2 121.6 60 209.6-.6 1.1 3.4 14.8 6.9 27.4 14.8-25.1 37.1-55.4 36-58.2-91.4-222.7 194.1-239.8 253.5-378 26.8 133.6-13.7 340.3-243.3 392.9-1.1.6-41.7 71.9-43.4 72.5 0-1.1-17.1-.6-14.8-6.3 1.1-3.6 3.3-8.1 5.6-12.7m56.6-98.8c-36-85.1 69.7-178.7 122.2-202.1C208.2 254.6 189.9 326 193.4 360.8M134 405.9c29.1-33.7-5.1-91.4-25.7-110.2 34.8 60 32.5 94.8 25.7 110.2" transform="translate(-15.306 -14.379)scale(1.10017)"/></svg>
                </button>
                {% endif %}
            {% endif %}</td>
            <td>{{ bill.from_date|date:"d.m.Y" }} - {{ bill.to_date|date:"d.m.Y" }}</td>
            <td class="consumption-cell" style="white-space: nowrap;">{{ bill.value|floatformat:2 }} €</td>
        </tr>
        {% endfor %}
        {% if bills|length > 1 %}
        <tr style="border-top: 2px solid #333;">
            <td colspan="4" style="text-align: right; font-weight: bold;">Gesamtsumme:</td>
            <td class="consumption-cell" style="font-size: 1.1em; white-space: nowrap;">
                <strong>{{ total_amount|floatformat:2 }} €</strong>
            </td>
        </tr>
        {% endif %}
    </tbody>
</table>
